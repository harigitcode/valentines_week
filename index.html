<script>
const start=document.getElementById("start");
const scene=document.getElementById("scene");
const music=document.getElementById("bgMusic");
const text=document.getElementById("text");
const moon=document.getElementById("moon");
const lunaStars=document.getElementById("lunaStars");
const finalArea=document.getElementById("finalArea");

/* Moon walking animation */
moon.style.position="relative";
moon.style.animation="moonWalk 12s linear infinite";

const style=document.createElement("style");
style.innerHTML=`
@keyframes moonWalk{
0%{left:-40px;}
50%{left:40px;}
100%{left:-40px;}
}

/* Hand holding hearts */
.hand-hearts{
position:fixed;
bottom:15%;
left:50%;
transform:translateX(-50%);
font-size:40px;
animation:holdPulse 1.5s infinite alternate;
}
@keyframes holdPulse{
from{transform:translateX(-50%) scale(1);}
to{transform:translateX(-50%) scale(1.2);}
}
`;
document.head.appendChild(style);

const story=[
"Hi Lunaâ€¦ I'm your little moon ðŸŒ™",
"I came to tell you something specialâ€¦",
"You make someoneâ€™s world brighter.",
"You bring peace to his heart.",
"He smiles because of you.",
"Today he wants to sayâ€¦",
"Happy Chocolate Day Luna â¤ï¸",
"You are his moonâ€¦ his happiness.",
"And he wants you to knowâ€¦"
];

start.onclick=()=>{
start.style.display="none";
scene.style.display="block";
music.play();
runStory();
};

let i=0;

function runStory(){
let interval=setInterval(()=>{
if(i<story.length){
showText(story[i]);
createHearts();
i++;

if(i===5){
document.body.classList.add("night");
createStars();
}

if(i===story.length){
clearInterval(interval);
endScene();
}
}
},3000);
}

function showText(msg){
text.style.opacity=0;
setTimeout(()=>{
text.innerText=msg;
text.style.opacity=1;
},300);
}

/* Ending Scene */
function endScene(){
moon.classList.add("hug");
lunaStars.style.opacity=1;

/* Hand holding hearts */
const hold=document.createElement("div");
hold.className="hand-hearts";
hold.innerHTML="ðŸ’ž";
document.body.appendChild(hold);

setTimeout(()=>{
finalArea.style.display="block";
speakLove(); // voice message
},2500);
}

/* Text-to-speech (your voice substitute) */
function speakLove(){
const speech=new SpeechSynthesisUtterance(
"I love you Luna. You are my moon, my happiness, and my forever."
);
speech.rate=0.9;
speech.pitch=1.1;
speech.volume=1;
speech.lang="en-US";
speechSynthesis.speak(speech);
}

/* Floating hearts */
function createHearts(){
for(let j=0;j<3;j++){
let h=document.createElement("div");
h.className="heart";
h.innerHTML="â¤ï¸";
h.style.left=Math.random()*100+"vw";
h.style.fontSize=(Math.random()*18+12)+"px";
document.body.appendChild(h);
setTimeout(()=>h.remove(),6000);
}
}

/* Stars */
function createStars(){
for(let j=0;j<50;j++){
let s=document.createElement("div");
s.className="star";
s.innerHTML="âœ¦";
s.style.left=Math.random()*100+"vw";
s.style.top=Math.random()*100+"vh";
document.body.appendChild(s);
}
}

function playVoice(){
speakLove();
}
</script>
